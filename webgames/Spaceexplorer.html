<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Shooter</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            font-family: Arial, sans-serif;
            color: #fff;
            overflow: hidden;
        }
        .dialogue {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
        }
        .dialogue__content {
            background: rgba(0, 0, 0, 0.8);
            padding: 2rem;
            border-radius: 10px;
            border: 2px solid #0ff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }
        .dialogue h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #0ff;
        }
        .dialogue ul {
            list-style: none;
            padding: 0;
            margin-bottom: 2rem;
        }
        .dialogue li {
            margin: 0.5rem 0;
            font-size: 1.2rem;
        }
        .key {
            display: inline-block;
            background: #333;
            border: 1px solid #666;
            border-radius: 3px;
            padding: 0.2rem 0.5rem;
            font-family: monospace;
            color: #0ff;
        }
        .key--arrow {
            font-size: 1.5rem;
        }
        .dialogue button {
            background: #0ff;
            color: #000;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.2rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .dialogue button:hover {
            background: #00cccc;
        }
        .hud {
            position: absolute;
            top: 10px;
            right: 10px;
            list-style: none;
            padding: 0;
            margin: 0;
            z-index: 5;
        }
        .hud--hidden {
            display: none;
        }
        .hud li {
            background: rgba(0, 0, 0, 0.8);
            padding: 0.5rem 1rem;
            border-radius: 5px;
            border: 1px solid #0ff;
            margin-bottom: 0.5rem;
        }
        canvas {
            display: block;
            background: #000;
        }
    </style>
</head>
<body>
    <div class="dialogue">
        <div class="dialogue__content">
            <h1>Space Shooter</h1>
            <ul>
                <li>Use the <span class="key key--arrow">&larr;</span> and <span class="key key--arrow">&rarr;</span> keys to move.</li>
                <li>Use <span class="key">spacebar</span> to fire lasers.</li>
            </ul>
            <button id="startButton">Start</button>
        </div>
    </div>

    <ul class="hud hud--hidden" id="hud">
        <li class="hud__score">Score: <span id="score">0</span></li>
    </ul>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const startButton = document.getElementById('startButton');
        const dialogue = document.querySelector('.dialogue');
        const hud = document.getElementById('hud');
        const scoreSpan = document.getElementById('score');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let gameRunning = false;
        let score = 0;

        // Player
        const player = {
            x: canvas.width / 2 - 25,
            y: canvas.height - 60,
            width: 50,
            height: 50,
            speed: 5
        };

        // Lasers
        const lasers = [];
        const laserSpeed = 7;

        // Enemies
        const enemies = [];
        const enemySpeed = 2;
        let enemySpawnRate = 0.02;

        // Keys
        const keys = {};

        // Event listeners
        document.addEventListener('keydown', (e) => {
            keys[e.code] = true;
            if (e.code === 'Space') {
                e.preventDefault();
                if (gameRunning) shootLaser();
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.code] = false;
        });

        startButton.addEventListener('click', startGame);

        function startGame() {
            dialogue.style.display = 'none';
            hud.classList.remove('hud--hidden');
            gameRunning = true;
            score = 0;
            scoreSpan.textContent = score;
            lasers.length = 0;
            enemies.length = 0;
            player.x = canvas.width / 2 - 25;
            gameLoop();
        }

        function shootLaser() {
            lasers.push({
                x: player.x + player.width / 2 - 2,
                y: player.y,
                width: 4,
                height: 10
            });
        }

        function spawnEnemy() {
            if (Math.random() < enemySpawnRate) {
                enemies.push({
                    x: Math.random() * (canvas.width - 40),
                    y: -40,
                    width: 40,
                    height: 40
                });
            }
        }

        function update() {
            // Player movement
            if (keys['ArrowLeft'] && player.x > 0) {
                player.x -= player.speed;
            }
            if (keys['ArrowRight'] && player.x < canvas.width - player.width) {
                player.x += player.speed;
            }

            // Update lasers
            lasers.forEach((laser, index) => {
                laser.y -= laserSpeed;
                if (laser.y < -laser.height) {
                    lasers.splice(index, 1);
                }
            });

            // Spawn and update enemies
            spawnEnemy();
            enemies.forEach((enemy, index) => {
                enemy.y += enemySpeed;
                if (enemy.y > canvas.height) {
                    enemies.splice(index, 1);
                }
            });

            // Collision detection
            lasers.forEach((laser, laserIndex) => {
                enemies.forEach((enemy, enemyIndex) => {
                    if (laser.x < enemy.x + enemy.width &&
                        laser.x + laser.width > enemy.x &&
                        laser.y < enemy.y + enemy.height &&
                        laser.y + laser.height > enemy.y) {
                        // Hit
                        lasers.splice(laserIndex, 1);
                        enemies.splice(enemyIndex, 1);
                        score += 10;
                        scoreSpan.textContent = score;
                    }
                });
            });

            // Check player collision with enemies
            enemies.forEach((enemy) => {
                if (player.x < enemy.x + enemy.width &&
                    player.x + player.width > enemy.x &&
                    player.y < enemy.y + enemy.height &&
                    player.y + player.height > enemy.y) {
                    // Game over
                    gameRunning = false;
                    dialogue.style.display = 'block';
                    hud.classList.add('hud--hidden');
                    startButton.textContent = 'Restart';
                }
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw player
            ctx.fillStyle = '#0ff';
            ctx.fillRect(player.x, player.y, player.width, player.height);

            // Draw lasers
            ctx.fillStyle = '#ff0';
            lasers.forEach(laser => {
                ctx.fillRect(laser.x, laser.y, laser.width, laser.height);
            });

            // Draw enemies
            ctx.fillStyle = '#f00';
            enemies.forEach(enemy => {
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
            });
        }

        function gameLoop() {
            if (gameRunning) {
                update();
                draw();
                requestAnimationFrame(gameLoop);
            }
        }

        // Resize canvas
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            if (!gameRunning) {
                player.x = canvas.width / 2 - 25;
                player.y = canvas.height - 60;
            }
        });
    </script>
</body>
</html>
